<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%!
    from pyrite.utils import stringopts
    from pyrite.git.commit import Commit
    from pyrite.git.repository import Repo
    __repos = {'default': Repo()}
%>
<% repo = __repos.get(path, __repos['default']) %>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="/static/header.css" />
    <link rel="stylesheet" type="text/css" href="/static/commit_table.css" />
    <title>${ repo.description} -- Pyrite web interface.</title>
    <style type="text/css">
        .left_side
        {
            padding-left: 10px;
            margin-right:200px;
        }
        .right_side
        {
            position: absolute;
            right: 0px;
            top:98px;
            width: 180px;
            border-left: solid 1px black;
            display: block;
            height: 100%;
            float: left;
        }
    </style>
</head>
<%namespace name="header" file="header.html" />
<body>
    ${header.header(repo)}

<div class="left_side">
    <table id="commits_table">
        <tr>
            <td class="col_header">Date</td>
            <td class="col_header">User</td>
            <td class="col_header">Subject</td>
        </tr>
        % for i, c in enumerate(repo['HEAD~50':]):
        <tr class="data_row" parity="${ i % 2 and 'True' or 'False' }">
            <td class="cell date_cell">
                ${ stringopts.relative_date(c.raw[Commit.COMMIT_DATE]) }
            </td>
            <td class="cell">${ c.author_name }</td>
            <td class="cell subj_cell">
                <a href="default/commit/${c.id}">${ c.subject }</a>
            </td>
        </tr>
        % endfor
    </table>
</div>
<div class="right_side">
    Branches:<br>
        <% cur = repo.branch() %>
        % for b in repo.branches():
        %    if cur == b:
               <b>${ b }</b><br>
        %    else:
               ${ b }<br>
        %    endif
        % endfor
</div>
</body>
</html>

